{"version":3,"sources":["webpack:///./src/views/Stock.vue?ba09","webpack:///src/views/Stock.vue","webpack:///./src/views/Stock.vue?5cae","webpack:///./src/views/Stock.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","primary-title","_v","_s","entity","display_name_plural","max-width","transition","isMobile","scrollable","fullscreen","scopedSlots","_u","hideAddButton","key","fn","ref","on","_g","color","click","setDefaultValues","model","value","callback","$$v","dialog","expression","dark","icon","$event","_e","formTitle","item","updated_at","moment","fromNow","flat","save","submit","preventDefault","_l","getEntityForm","editedIndex","field","edited-index","rules","getFieldValidations","change-handler","val","close","append-icon","label","single-line","search","staticClass","headers","getEntityHeaders","items","getItems","apiUrl","params","office","$store","state","app","selectedOffice","custom-filter","customFilter","no-results-text","rows-per-page-text","rows-per-page-items","rowsPerPage","props","Object","keys","field_configs","list","index","class","text-xs-center","align","text-xs-right","text-xs-left","editItem","formatter","_b","tag","no_actions","initialize","proxy","staticRenderFns","moment_default","a","locale","Stockvue_type_script_lang_js_","components","RenderField","data","text","computed","objectSpread","concat","display_name","$vuetify","breakpoint","name","vuex_esm","watch","$refs","form","resetValidation","created","methods","entities","url","assign_default","length","dispatch","$router","replace","indexOf","deleteItem","_deleteItem","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","_ref2","err","res","wrap","_context","prev","next","window","confirm","deletedItem","sent","slicedToArray","commit","stop","_x","apply","arguments","_this","setTimeout","_save","_callee2","_ref3","_ref4","_ref5","_ref6","_err","_res","_data","_this2","_context2","validate","updatedItem","response","error","message","keys_default","filter","inputSearch","toString","toLowerCase","trim","searchKeys","some","utils","split","office_id","id","views_Stockvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","installComponents_default","VBtn","VCard","VCardActions","components_VCard","VCardText","VCardTitle","VDataTable","VDialog","VForm","VIcon","VSpacer","VGrid","VSubheader","VTextField","VToolbar","VToolbarItems","components_VToolbar","VToolbarTitle"],"mappings":"yHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAF,EAAA,OAAAI,EAAA,UAAAA,EAAA,gBAAoDE,MAAA,CAAOC,gBAAA,KAAoB,CAAAH,EAAA,MAAAJ,EAAAQ,GAAAR,EAAAS,GAAAT,EAAAU,OAAAC,wBAAAP,EAAA,YAAAA,EAAA,YAA0FE,MAAA,CAAOM,YAAA,QAAAC,WAAAb,EAAAc,SAAA,+CAAAC,WAAA,GAAAC,WAAAhB,EAAAc,UAA2IG,YAAAjB,EAAAkB,GAAA,CAAAlB,EAAAU,OAAAS,cAE3Q,KAF2Q,CAAkDC,IAAA,YAAAC,GAAA,SAAAC,GACtc,IAAAC,EAAAD,EAAAC,GACA,OAAAnB,EAAA,QAAAJ,EAAAwB,GAAA,CAA2BlB,MAAA,CAAOmB,MAAA,WAAkBF,GAAA,CAAKG,MAAA1B,EAAA2B,mBAA8BJ,GAAA,CAAAvB,EAAAQ,GAAA,uCAAkD,SAAAoB,MAAA,CAAyBC,MAAA7B,EAAA,OAAA8B,SAAA,SAAAC,GAA4C/B,EAAAgC,OAAAD,GAAeE,WAAA,WAAsB,CAAA7B,EAAA,UAAAA,EAAA,aAA+BE,MAAA,CAAO4B,KAAA,GAAAT,MAAA,YAA6B,CAAAzB,EAAA,SAAAI,EAAA,SAA6BE,MAAA,CAAO6B,KAAA,GAAAD,KAAA,IAAoBX,GAAA,CAAKG,MAAA,SAAAU,GAAyBpC,EAAAgC,QAAA,KAAqB,CAAA5B,EAAA,UAAAJ,EAAAQ,GAAA,eAAAR,EAAAqC,KAAAjC,EAAA,mBAAAJ,EAAAQ,GAAAR,EAAAS,GAAAT,EAAAsC,cAAAlC,EAAA,YAAAJ,EAAAuC,KAAAC,aAAAxC,EAAAc,SAAAV,EAAA,eAAAJ,EAAAQ,GAAA,sCAAAR,EAAAS,GAAAT,EAAAyC,OAAAzC,EAAAuC,KAAAC,YAAAE,WAAA,kBAAA1C,EAAAqC,KAAArC,EAAA,SAAAI,EAAA,mBAAAA,EAAA,SAAuVE,MAAA,CAAO4B,KAAA,GAAAS,KAAA,IAAoBpB,GAAA,CAAKG,MAAA1B,EAAA4C,OAAkB,CAAA5C,EAAAQ,GAAA,+CAAAR,EAAAqC,MAAA,GAAAjC,EAAA,eAAAA,EAAA,UAAoGkB,IAAA,OAAAC,GAAA,CAAesB,OAAA,SAAAT,GAAkD,OAAxBA,EAAAU,iBAAwB9C,EAAA4C,KAAAR,MAA0B,CAAApC,EAAA+C,GAAA/C,EAAAgD,cAAAhD,EAAAU,QAAA,IAAAV,EAAAiD,aAAA,SAAAC,GAAiF,OAAA9C,EAAA,gBAA2BgB,IAAA,aAAA8B,EAAA5C,MAAA,CAA8BI,OAAAV,EAAAU,OAAAwC,QAAAX,KAAAvC,EAAAuC,KAAAY,eAAAnD,EAAAiD,YAAAG,MAAApD,EAAAqD,oBAAArD,EAAAU,OAAAwC,EAAAlD,EAAAuC,MAAAe,iBAAA,SAAAC,GAA+K,OAAAvD,EAAAuC,KAAAW,GAAAK,UAAqC,OAAAvD,EAAAc,SAAwQd,EAAAqC,KAAxQjC,EAAA,kBAAAA,EAAA,YAAAA,EAAA,SAA0EE,MAAA,CAAOmB,MAAA,gBAAAkB,KAAA,IAAkCpB,GAAA,CAAKG,MAAA1B,EAAAwD,QAAmB,CAAAxD,EAAAQ,GAAA,wCAAAJ,EAAA,SAA6DE,MAAA,CAAOmB,MAAA,gBAAAkB,KAAA,IAAkCpB,GAAA,CAAKG,MAAA1B,EAAA4C,OAAkB,CAAA5C,EAAAQ,GAAA,uDAAAJ,EAAA,OAAAA,EAAA,aAAmGE,MAAA,CAAOqC,KAAA,GAAAlB,MAAA,UAA2B,CAAArB,EAAA,gBAAqBE,MAAA,CAAOmD,cAAA,SAAAC,MAAA,SAAAC,cAAA,IAAyD/B,MAAA,CAAQC,MAAA7B,EAAA,OAAA8B,SAAA,SAAAC,GAA4C/B,EAAA4D,OAAA7B,GAAeE,WAAA,aAAsB,GAAA7B,EAAA,gBAAyByD,YAAA,cAAAvD,MAAA,CAAiCwD,QAAA9D,EAAA+D,iBAAA/D,EAAAU,QAAAkD,OAAA5D,EAAA4D,OAAAI,MAAAhE,EAAAiE,SAAA,CAC57DvD,OAAAV,EAAAU,OAAAwD,OACAC,OAAA,CAAiBC,OAAApE,EAAAqE,OAAAC,MAAAC,IAAAC,kBACVC,gBAAAzE,EAAA0E,aAAAC,kBAAA,8BAAAC,qBAAA,uBAAAC,sBAAA7E,EAAA8E,aAAqK7D,YAAAjB,EAAAkB,GAAA,EAAsBE,IAAA,QAAAC,GAAA,SAAA0D,GAA+B,OAAA/E,EAAA+C,GAAAiC,OAAAC,KAAAjF,EAAAU,OAAAwE,cAAAC,MAAA,SAAAjC,GAA4E,OAAA9C,EAAA,MAAgBgB,IAAA,QAAA2D,EAAAK,MAAA,IAAAlC,EAAAmC,MAAA,CAC7TC,iBAAA,WAAAtF,EAAAU,OAAAwE,cAAAC,KAAAjC,GAAAqC,MACAC,gBAAA,UAAAxF,EAAAU,OAAAwE,cAAAC,KAAAjC,GAAAqC,MACAE,eAAA,SAAAzF,EAAAU,OAAAwE,cAAAC,KAAAjC,GAAAqC,OACWhE,GAAA,CAAKG,MAAA,SAAAU,GAAyB,OAAApC,EAAA0F,SAAAX,EAAAxC,SAAkC,CAAAvC,EAAAU,OAAAwE,cAAAC,KAAAjC,GAAA,UAAA9C,EAAAJ,EAAAU,OAAAwE,cAAAC,KAAAjC,GAAAyC,UAAA3F,EAAA4F,GAAA,CAA6GC,IAAA,aAAgB,YAAAd,EAAAxC,MAAA,IAAAnC,EAAA,OAAAJ,EAAAQ,GAAA,iBAAAR,EAAAS,GAAAsE,EAAAxC,KAAAW,IAAA,wBAAkHlD,EAAAU,OAAAoF,WAA6E9F,EAAAqC,KAA7EjC,EAAA,MAAoCyD,YAAA,kCAAsD,CAAEzC,IAAA,UAAAC,GAAA,WAA4B,OAAAjB,EAAA,SAAoBE,MAAA,CAAOmB,MAAA,WAAkBF,GAAA,CAAKG,MAAA1B,EAAA+F,aAAwB,CAAA/F,EAAAQ,GAAA,mCAA2CwF,OAAA,IAAY,uBAAyB,OAAAhG,EAAAqC,MAC5kB4D,EAAA,0NC8JAC,EAAAC,EAAAC,OAAA,MAEA,IAAAC,EAAA,CACAC,WAAA,CAAAC,cAAA,MACAC,KAAA,kBACA5C,OAAA,GACA5B,QAAA,EACAtB,OAAA,KACAuC,aAAA,EACAV,KAAA,KACAuC,YAAA,UAAA2B,KAAA,QAAA5E,OAAA,MAGA6E,SAAA1B,OAAA2B,EAAA,KAAA3B,CAAA,CACA1C,UADA,WAEA,WAAArC,KAAAgD,YAAA,SAAA2D,OACA3G,KAAAS,OAAAmG,cADA,UAAAD,OAEA3G,KAAAS,OAAAmG,eAEA/F,SANA,WAOA,aAAAb,KAAA6G,SAAAC,WAAAC,MAAA,OAAA/G,KAAA6G,SAAAC,WAAAC,OAEAhC,OAAAiC,EAAA,KAAAjC,CAAA,0BAGAkC,MAAA,CACAlF,OADA,SACAuB,GACAA,GAAAtD,KAAAuD,QACAvD,KAAAkH,MAAAC,KAAAC,oBAIAC,QA9BA,WA+BArH,KAAA8F,cAGAwB,QAAA,CACAxB,WADA,WAEA,GAAAf,OAAAwC,EAAA,KAAAxC,CAAA,CAAAyC,IAAA,YAMA,OALAxH,KAAAS,OAAAsE,OAAAwC,EAAA,KAAAxC,CAAA,CAAAyC,IAAA,YACAxH,KAAAsC,KAAAmF,IAAA,GAAA1C,OAAAwC,EAAA,KAAAxC,CAAA/E,KAAAS,cACAT,KAAAoE,OAAAC,MAAAkD,SAAAvH,KAAAS,OAAAwD,QAAAyD,QACA1H,KAAAoE,OAAAuD,SAAA,iBAAAlH,OAAAT,KAAAS,OAAAwD,UAIAjE,KAAA4H,QAAAC,QAAA,MAGApC,SAbA,SAaAnD,GACAtC,KAAAgD,YAAAhD,KAAAoE,OAAAC,MAAAkD,SAAAvH,KAAAS,OAAAwD,QAAA6D,QACAxF,GAEAtC,KAAAsC,KAAAmF,IAAA,GAAAnF,GACAtC,KAAA+B,QAAA,GAGAgG,WArBA,eAAAC,EAAAjD,OAAAkD,EAAA,KAAAlD,CAAAmD,mBAAAC,KAAA,SAAAC,EAqBA9F,GArBA,IAAA6C,EAAAkD,EAAAC,EAAAC,EAAAC,EAAA,OAAAN,mBAAAO,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAsBAzD,EAAAnF,KAAAoE,OAAAC,MAAAkD,SAAAvH,KAAAS,OAAAwD,QAAA6D,QACAxF,IAEAuG,OAAAC,QAAA,2CAzBA,CAAAJ,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EA0BA5I,KAAAoE,OAAAuD,SAAA,mBACAoB,YAAA5D,EACA1E,OAAAT,KAAAS,OAAAwD,OACA3B,SA7BA,OAAA+F,EAAAK,EAAAM,KAAAV,EAAAvD,OAAAkE,EAAA,KAAAlE,CAAAsD,EAAA,GA0BAE,EA1BAD,EAAA,GA0BAE,EA1BAF,EAAA,GA+BAC,GACAvI,KAAAoE,OAAA8E,OAAA,gBAAAV,GAhCA,wBAAAE,EAAAS,SAAAf,EAAApI,SAAA,SAAA+H,EAAAqB,GAAA,OAAApB,EAAAqB,MAAArJ,KAAAsJ,WAAA,OAAAvB,EAAA,GAqCAxE,MArCA,WAqCA,IAAAgG,EAAAvJ,KACAA,KAAA+B,QAAA,EACAyH,WAAA,WACAD,EAAAjH,KAAAmF,IAAA,GAAA1C,OAAAwC,EAAA,KAAAxC,CAAAwE,EAAA9I,SACA8I,EAAAvG,aAAA,GACA,MAGAL,KA7CA,eAAA8G,EAAA1E,OAAAkD,EAAA,KAAAlD,CAAAmD,mBAAAC,KAAA,SAAAuB,IAAA,IAAAC,EAAAC,EAAArB,EAAAC,EAAAjC,EAAAsD,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAlK,KAAA,OAAAkI,mBAAAO,KAAA,SAAA0B,GAAA,eAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,WA8CA5I,KAAAkH,MAAAC,KAAAiD,WA9CA,CAAAD,EAAAvB,KAAA,cA+CA5I,KAAAgD,aAAA,GA/CA,CAAAmH,EAAAvB,KAAA,gBAAAuB,EAAAvB,KAAA,EAgDA5I,KAAAoE,OAAAuD,SAAA,mBACA0C,YAAArK,KAAAgD,YACAvC,OAAAT,KAAAS,OAAAwD,OACA3B,KAAAtC,KAAAsC,OAnDA,OAAAqH,EAAAQ,EAAAnB,KAAAY,EAAA7E,OAAAkE,EAAA,KAAAlE,CAAA4E,EAAA,GAgDApB,EAhDAqB,EAAA,GAgDApB,EAhDAoB,EAAA,GAqDArB,EAIAA,EAAA+B,UACA/B,EAAA+B,SAAA/D,MACAgC,EAAA+B,SAAA/D,KAAAgE,QAEAhE,EAAAgC,EAAA+B,SAAA/D,KACAvG,KAAAoE,OAAA8E,OAAA,gBAAAnE,OAAA2B,EAAA,KAAA3B,CAAA,GACAwB,EADA,CAEAiE,QAAAjE,EAAAgE,MAAAE,IAAAlE,EAAAgE,OAAA,YAVAvK,KAAAoE,OAAA8E,OAAA,gBAAAV,GACAxI,KAAAuD,SAvDA4G,EAAAvB,KAAA,wBAAAuB,EAAAvB,KAAA,GAoEA5I,KAAAoE,OAAAuD,SAAA,mBACAlH,OAAAT,KAAAS,OAAAwD,OACA3B,KAAAtC,KAAAsC,OAtEA,QAAAuH,EAAAM,EAAAnB,KAAAc,EAAA/E,OAAAkE,EAAA,KAAAlE,CAAA8E,EAAA,GAoEAE,EApEAD,EAAA,GAoEAE,EApEAF,EAAA,GAwEAC,EAIAA,EAAAO,UACAP,EAAAO,SAAA/D,MACAwD,EAAAO,SAAA/D,KAAAgE,QAEAN,EAAAF,EAAAO,SAAA/D,KACAvG,KAAAoE,OAAA8E,OAAA,gBAAAnE,OAAA2B,EAAA,KAAA3B,CAAA,GACAkF,EADA,CAEAO,QAAAP,EAAAM,MAAAE,IAAAR,EAAAM,OAAA,YAVAvK,KAAAoE,OAAA8E,OAAA,gBAAAc,GACAhK,KAAAuD,SA1EA,QAAA4G,EAAAvB,KAAA,iBAwFA5I,KAAAkH,MAAAC,KAAAC,kBACAoC,WAAA,WACAU,EAAAhD,MAAAC,KAAAiD,YACA,KA3FA,yBAAAD,EAAAhB,SAAAO,EAAA1J,SAAA,SAAA2C,IAAA,OAAA8G,EAAAJ,MAAArJ,KAAAsJ,WAAA,OAAA3G,EAAA,GA+FA8B,aA/FA,SA+FAV,EAAAJ,EAAA+G,GACA,IAAAC,EAAAhH,EAAAiH,WAAAC,cACA,QAAAF,EAAAG,OAAA,OAAA/G,EACA,IAAAgH,EAAA/K,KAAAS,OAAAwE,cAAAtB,OACA,OAAAI,EAAA2G,OAAA,SAAApI,GAAA,OAAAyI,GAAAN,IAAAnI,IAAA0I,KAAA,SAAA7J,GAAA,OAAAuJ,EAAA3F,OAAAkG,EAAA,KAAAlG,CAAAzC,EAAAnB,EAAA+J,MAAA,MAAAP,QAGAjJ,iBAtGA,WAuGA1B,KAAAsC,KAAA6I,UAAAnL,KAAAoE,OAAAC,MAAAC,IAAAC,eAAA6G,IAGAtH,iBAAAyD,EAAA,KACAxE,cAAAwE,EAAA,KACAnE,oBAAAmE,EAAA,KACA/E,OAAAyD,EAAAC,ICzT+XmF,EAAA,+LCO/XC,EAAgBvG,OAAAwG,EAAA,KAAAxG,CACdsG,EACAvL,EACAkG,GACF,EACA,KACA,KACA,MAIewF,EAAA,WAAAF,EAAiB,QAmBhCG,IAAiBH,EAAA,CAAaI,OAAA,KAAKC,QAAA,KAAMC,aAAAC,EAAA,KAAaC,UAAAD,EAAA,KAAUE,aAAA,KAAWC,aAAA,KAAWC,UAAA,KAAQC,QAAA,KAAMC,QAAA,KAAMC,QAAAC,EAAA,KAAQC,aAAA,KAAWC,aAAA,KAAWC,WAAA,KAASC,cAAAC,EAAA,KAAcC,cAAAD,EAAA","file":"js/chunk-2d0d0ba6.dbc2db0e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.entity)?_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('h1',[_vm._v(_vm._s(_vm.entity.display_name_plural))]),_c('v-spacer'),_c('v-dialog',{attrs:{\"max-width\":\"690px\",\"transition\":_vm.isMobile ? 'dialog-bottom-transition' : 'dialog-transition',\"scrollable\":\"\",\"fullscreen\":_vm.isMobile},scopedSlots:_vm._u([(!_vm.entity.hideAddButton)?{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"color\":\"success\"},on:{\"click\":_vm.setDefaultValues}},on),[_vm._v(\"\\n          Agregar\\n        \")])]}}:null],null,true),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"dark\":\"\",\"color\":\"primary\"}},[(_vm.isMobile)?_c('v-btn',{attrs:{\"icon\":\"\",\"dark\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_c('v-icon',[_vm._v(\"close\")])],1):_vm._e(),_c('v-toolbar-title',[_vm._v(_vm._s(_vm.formTitle))]),_c('v-spacer'),(_vm.item.updated_at && !_vm.isMobile)?_c('v-subheader',[_vm._v(\"\\n            Ultima modificacion: \"+_vm._s(_vm.moment(_vm.item.updated_at).fromNow())+\"\\n          \")]):_vm._e(),(_vm.isMobile)?_c('v-toolbar-items',[_c('v-btn',{attrs:{\"dark\":\"\",\"flat\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"\\n              Guardar\\n            \")])],1):_vm._e()],1),_c('v-card-text',[_c('v-form',{ref:\"form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.save($event)}}},[_vm._l((_vm.getEntityForm(_vm.entity, _vm.editedIndex !== -1)),function(field){return [_c('render-field',{key:'item-form-'+field,attrs:{\"entity\":_vm.entity,\"field\":field,\"item\":_vm.item,\"edited-index\":_vm.editedIndex,\"rules\":_vm.getFieldValidations(_vm.entity, field, _vm.item),\"change-handler\":function (val) { return _vm.item[field] = val; }}})]})],2)],1),(!_vm.isMobile)?_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"flat\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\"\\n            Cancelar\\n          \")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"flat\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"\\n            Guardar\\n          \")])],1):_vm._e()],1)],1)],1),_c('div',[_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"Buscar\",\"single-line\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.getEntityHeaders(_vm.entity),\"search\":_vm.search,\"items\":_vm.getItems({\n        entity:_vm.entity.apiUrl,\n        params: { office: _vm.$store.state.app.selectedOffice }\n      }),\"custom-filter\":_vm.customFilter,\"no-results-text\":\"No se encontraron registros\",\"rows-per-page-text\":\"Registros por página\",\"rows-per-page-items\":_vm.rowsPerPage},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_vm._l((Object.keys(_vm.entity.field_configs.list)),function(field){return _c('td',{key:'item-'+props.index+'-'+field,class:{\n            'text-xs-center':_vm.entity.field_configs.list[field].align === 'center',\n            'text-xs-right':_vm.entity.field_configs.list[field].align === 'right',\n            'text-xs-left':_vm.entity.field_configs.list[field].align === 'left'\n          },on:{\"click\":function($event){return _vm.editItem(props.item)}}},[(_vm.entity.field_configs.list[field].formatter)?_c(_vm.entity.field_configs.list[field].formatter,_vm._b({tag:\"component\"},'component',props.item,false)):_c('div',[_vm._v(\"\\n            \"+_vm._s(props.item[field])+\"\\n          \")])],1)}),(!_vm.entity.no_actions)?_c('td',{staticClass:\"justify-center layout px-0\"}):_vm._e()]}},{key:\"no-data\",fn:function(){return [_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.initialize}},[_vm._v(\"\\n          Reset\\n        \")])]},proxy:true}],null,false,2275255183)})],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card v-if=\"entity\">\n    <v-card-title primary-title>\n      <h1>{{ entity.display_name_plural }}</h1>\n      <v-spacer />\n      <v-dialog\n        v-model=\"dialog\"\n        max-width=\"690px\"\n        :transition=\"isMobile ? 'dialog-bottom-transition' : 'dialog-transition'\"\n        scrollable\n        :fullscreen=\"isMobile\"\n      >\n        <template\n          v-if=\"!entity.hideAddButton\"\n          v-slot:activator=\"{ on }\"\n        >\n          <v-btn\n            color=\"success\"\n            v-on=\"on\"\n            @click=\"setDefaultValues\"\n          >\n            Agregar\n          </v-btn>\n        </template>\n        <v-card>\n          <v-toolbar\n            dark\n            color=\"primary\"\n          >\n            <v-btn\n              v-if=\"isMobile\"\n              icon\n              dark\n              @click=\"dialog = false\"\n            >\n              <v-icon>close</v-icon>\n            </v-btn>\n            <v-toolbar-title>{{ formTitle }}</v-toolbar-title>\n            <v-spacer />\n            <v-subheader v-if=\"item.updated_at && !isMobile\">\n              Ultima modificacion: {{ moment(item.updated_at).fromNow() }}\n            </v-subheader>\n            <v-toolbar-items v-if=\"isMobile\">\n              <v-btn\n                dark\n                flat\n                @click=\"save\"\n              >\n                Guardar\n              </v-btn>\n            </v-toolbar-items>\n          </v-toolbar>\n          <v-card-text>\n            <v-form\n              ref=\"form\"\n              @submit.prevent=\"save\"\n            >\n              <template v-for=\"field in getEntityForm(entity, editedIndex !== -1)\">\n                <render-field\n                  :key=\"'item-form-'+field\"\n                  :entity=\"entity\"\n                  :field=\"field\"\n                  :item=\"item\"\n                  :edited-index=\"editedIndex\"\n                  :rules=\"getFieldValidations(entity, field, item)\"\n                  :change-handler=\"val => item[field] = val\"\n                />\n              </template>\n            </v-form>\n          </v-card-text>\n          <v-card-actions v-if=\"!isMobile\">\n            <v-spacer />\n            <v-btn\n              color=\"blue darken-1\"\n              flat\n              @click=\"close\"\n            >\n              Cancelar\n            </v-btn>\n            <v-btn\n              color=\"blue darken-1\"\n              flat\n              @click=\"save\"\n            >\n              Guardar\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-card-title>\n    <div>\n      <v-toolbar\n        flat\n        color=\"white\"\n      >\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"search\"\n          label=\"Buscar\"\n          single-line\n        />\n      </v-toolbar>\n      <v-data-table\n        :headers=\"getEntityHeaders(entity)\"\n        :search=\"search\"\n        :items=\"getItems({\n          entity:entity.apiUrl,\n          params: { office: $store.state.app.selectedOffice }\n        })\"\n        :custom-filter=\"customFilter\"\n        no-results-text=\"No se encontraron registros\"\n        rows-per-page-text=\"Registros por página\"\n        :rows-per-page-items=\"rowsPerPage\"\n        class=\"elevation-1\"\n      >\n        <template v-slot:items=\"props\">\n          <td\n            v-for=\"field in Object.keys(entity.field_configs.list)\"\n            :key=\"'item-'+props.index+'-'+field\"\n            :class=\"{\n              'text-xs-center':entity.field_configs.list[field].align === 'center',\n              'text-xs-right':entity.field_configs.list[field].align === 'right',\n              'text-xs-left':entity.field_configs.list[field].align === 'left'\n            }\"\n            @click=\"editItem(props.item)\"\n          >\n            <component\n              :is=\"entity.field_configs.list[field].formatter\"\n              v-if=\"entity.field_configs.list[field].formatter\"\n              v-bind=\"props.item\"\n            />\n            <div v-else>\n              {{ props.item[field] }}\n            </div>\n          </td>\n          <td\n            v-if=\"!entity.no_actions\"\n            class=\"justify-center layout px-0\"\n          >\n          </td>\n        </template>\n        <template v-slot:no-data>\n          <v-btn\n            color=\"primary\"\n            @click=\"initialize\"\n          >\n            Reset\n          </v-btn>\n        </template>\n      </v-data-table>\n    </div>\n  </v-card>\n</template>\n\n<script>\nimport {\n  getEntityInfo,\n  isValidEntity,\n  getEntityHeaders,\n  getEntityForm,\n  getEntityDefaultItem,\n  getFieldValidations,\n} from '@/utils/entities';\nimport { getDataFromKey } from '../utils';\nimport RenderField from '@/components/form/RenderField.vue';\nimport { mapGetters } from 'vuex';\nimport moment from 'moment';\n\nmoment.locale('es');\n\nexport default {\n  components: { RenderField },\n  data: () => ({\n    search: '',\n    dialog: false,\n    entity: null,\n    editedIndex: -1,\n    item: null,\n    rowsPerPage: [5, 10, 25, { text: 'Todos', value: -1 }],\n  }),\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1\n        ? `Crear ${this.entity.display_name}`\n        : `Editar ${this.entity.display_name}`;\n    },\n    isMobile() {\n      return this.$vuetify.breakpoint.name === 'sm' || this.$vuetify.breakpoint.name === 'xs';\n    },\n    ...mapGetters('entities', ['getItems']),\n  },\n\n  watch: {\n    dialog(val) {\n      if (!val) this.close();\n      this.$refs.form.resetValidation();\n    },\n  },\n\n  created() {\n    this.initialize();\n  },\n\n  methods: {\n    initialize() {\n      if (isValidEntity({ url: 'almacen' })) {\n        this.entity = getEntityInfo({ url: 'almacen' });\n        this.item = Object.assign({}, getEntityDefaultItem(this.entity));\n        if (!this.$store.state.entities[this.entity.apiUrl].length) {\n          this.$store.dispatch('entities/read', { entity: this.entity.apiUrl });\n        }\n        return;\n      }\n      this.$router.replace('/');\n    },\n\n    editItem(item) {\n      this.editedIndex = this.$store.state.entities[this.entity.apiUrl].indexOf(\n        item,\n      );\n      this.item = Object.assign({}, item);\n      this.dialog = true;\n    },\n\n    async deleteItem(item) {\n      const index = this.$store.state.entities[this.entity.apiUrl].indexOf(\n        item,\n      );\n      if (window.confirm('¿Esta seguro de eliminar este registro?')) {\n        const [err, res] = await this.$store.dispatch('entities/delete', {\n          deletedItem: index,\n          entity: this.entity.apiUrl,\n          item,\n        });\n        if (!err) {\n          this.$store.commit('app/showAlert', res);\n        }\n      }\n    },\n\n    close() {\n      this.dialog = false;\n      setTimeout(() => {\n        this.item = Object.assign({}, getEntityDefaultItem(this.entity));\n        this.editedIndex = -1;\n      }, 300);\n    },\n\n    async save() {\n      if (this.$refs.form.validate()) {\n        if (this.editedIndex > -1) {\n          const [err, res] = await this.$store.dispatch('entities/update', {\n            updatedItem: this.editedIndex,\n            entity: this.entity.apiUrl,\n            item: this.item,\n          });\n          if (!err) {\n            this.$store.commit('app/showAlert', res);\n            this.close();\n          } else if (\n            err.response\n            && err.response.data\n            && err.response.data.error\n          ) {\n            const { data } = err.response;\n            this.$store.commit('app/showAlert', {\n              ...data,\n              message: data.error[Object.keys(data.error)[0]][0],\n            });\n          }\n        } else {\n          const [err, res] = await this.$store.dispatch('entities/create', {\n            entity: this.entity.apiUrl,\n            item: this.item,\n          });\n          if (!err) {\n            this.$store.commit('app/showAlert', res);\n            this.close();\n          } else if (\n            err.response\n            && err.response.data\n            && err.response.data.error\n          ) {\n            const { data } = err.response;\n            this.$store.commit('app/showAlert', {\n              ...data,\n              message: data.error[Object.keys(data.error)[0]][0],\n            });\n          }\n        }\n      } else {\n        this.$refs.form.resetValidation();\n        setTimeout(() => {\n          this.$refs.form.validate();\n        }, 400);\n      }\n    },\n\n    customFilter(items, search, filter) {\n      const inputSearch = search.toString().toLowerCase();\n      if (inputSearch.trim() === '') return items;\n      const searchKeys = this.entity.field_configs.search;\n      return items.filter(item => (searchKeys || Object.keys(item)).some(key => filter(getDataFromKey(item, key.split('.')), inputSearch)));\n    },\n\n    setDefaultValues() {\n      this.item.office_id = this.$store.state.app.selectedOffice.id;\n    },\n\n    getEntityHeaders,\n    getEntityForm,\n    getFieldValidations,\n    moment,\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Stock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Stock.vue?vue&type=template&id=81842cfc&\"\nimport script from \"./Stock.vue?vue&type=script&lang=js&\"\nexport * from \"./Stock.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/danielortega/Documents/github/sistema-textiles-hernandez/frontend/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VCard } from 'vuetify/lib'\nimport { VCardActions } from 'vuetify/lib'\nimport { VCardText } from 'vuetify/lib'\nimport { VCardTitle } from 'vuetify/lib'\nimport { VDataTable } from 'vuetify/lib'\nimport { VDialog } from 'vuetify/lib'\nimport { VForm } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VSpacer } from 'vuetify/lib'\nimport { VSubheader } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\nimport { VToolbar } from 'vuetify/lib'\nimport { VToolbarItems } from 'vuetify/lib'\nimport { VToolbarTitle } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDataTable,VDialog,VForm,VIcon,VSpacer,VSubheader,VTextField,VToolbar,VToolbarItems,VToolbarTitle})\n"],"sourceRoot":""}