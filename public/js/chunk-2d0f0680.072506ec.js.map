{"version":3,"sources":["webpack:///./src/components/Entity.vue?7cba","webpack:///src/components/Entity.vue","webpack:///./src/components/Entity.vue?698c","webpack:///./src/components/Entity.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","primary-title","_v","_s","entity","display_name_plural","max-width","transition","isMobile","scrollable","fullscreen","scopedSlots","_u","hideAddButton","key","fn","ref","on","_g","color","model","value","callback","$$v","dialog","expression","dark","icon","click","$event","_e","formTitle","item","updated_at","moment","fromNow","flat","save","submit","preventDefault","_l","getEntityForm","editedIndex","field","edited-index","rules","getFieldValidations","change-handler","val","close","append-icon","label","single-line","search","staticClass","headers","getEntityHeaders","items","getItems","apiUrl","custom-filter","customFilter","no-results-text","rows-per-page-text","rows-per-page-items","rowsPerPage","props","Object","keys","field_configs","list","index","class","text-xs-center","align","text-xs-right","text-xs-left","editItem","formatter","_b","tag","no_actions","small","deleteItem","initialize","proxy","staticRenderFns","moment_default","a","locale","Entityvue_type_script_lang_js_","components","RenderField","data","text","computed","objectSpread","concat","display_name","$vuetify","breakpoint","name","vuex_esm","watch","$refs","form","resetValidation","created","methods","entities","url","$route","params","assign_default","$router","replace","$store","state","indexOf","_deleteItem","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","_ref2","err","res","wrap","_context","prev","next","window","confirm","dispatch","deletedItem","sent","slicedToArray","commit","stop","_x","apply","arguments","_this","setTimeout","_save","_callee2","_ref3","_ref4","_ref5","_ref6","_err","_res","_data","_this2","_context2","validate","updatedItem","response","error","message","keys_default","filter","inputSearch","toString","toLowerCase","trim","searchKeys","some","utils","split","components_Entityvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","installComponents_default","VBtn","VCard","VCardActions","components_VCard","VCardText","VCardTitle","VDataTable","VDialog","VForm","VIcon","VSpacer","VGrid","VSubheader","VTextField","VToolbar","VToolbarItems","components_VToolbar","VToolbarTitle"],"mappings":"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","file":"js/chunk-2d0f0680.072506ec.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.entity)?_c('v-card',[_c('v-card-title',{attrs:{\"primary-title\":\"\"}},[_c('h1',[_vm._v(_vm._s(_vm.entity.display_name_plural))]),_c('v-spacer'),_c('v-dialog',{attrs:{\"max-width\":\"690px\",\"transition\":_vm.isMobile ? 'dialog-bottom-transition' : 'dialog-transition',\"scrollable\":\"\",\"fullscreen\":_vm.isMobile},scopedSlots:_vm._u([(!_vm.entity.hideAddButton)?{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"color\":\"success\"}},on),[_vm._v(\"\\n          Agregar\\n        \")])]}}:null],null,true),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"dark\":\"\",\"color\":\"primary\"}},[(_vm.isMobile)?_c('v-btn',{attrs:{\"icon\":\"\",\"dark\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_c('v-icon',[_vm._v(\"close\")])],1):_vm._e(),_c('v-toolbar-title',[_vm._v(_vm._s(_vm.formTitle))]),_c('v-spacer'),(_vm.item.updated_at && !_vm.isMobile)?_c('v-subheader',[_vm._v(\"\\n            Ultima modificacion: \"+_vm._s(_vm.moment(_vm.item.updated_at).fromNow())+\"\\n          \")]):_vm._e(),(_vm.isMobile)?_c('v-toolbar-items',[_c('v-btn',{attrs:{\"dark\":\"\",\"flat\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"\\n              Guardar\\n            \")])],1):_vm._e()],1),_c('v-card-text',[_c('v-form',{ref:\"form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.save($event)}}},[_vm._l((_vm.getEntityForm(_vm.entity, _vm.editedIndex !== -1)),function(field){return [_c('render-field',{key:'item-form-'+field,attrs:{\"entity\":_vm.entity,\"field\":field,\"item\":_vm.item,\"edited-index\":_vm.editedIndex,\"rules\":_vm.getFieldValidations(_vm.entity, field, _vm.item),\"change-handler\":function (val) { return _vm.item[field] = val; }}})]})],2)],1),(!_vm.isMobile)?_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"flat\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\"\\n            Cancelar\\n          \")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"flat\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"\\n            Guardar\\n          \")])],1):_vm._e()],1)],1)],1),_c('div',[_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"Buscar\",\"single-line\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.getEntityHeaders(_vm.entity),\"search\":_vm.search,\"items\":_vm.getItems({ entity:_vm.entity.apiUrl }),\"custom-filter\":_vm.customFilter,\"no-results-text\":\"No se encontraron registros\",\"rows-per-page-text\":\"Registros por página\",\"rows-per-page-items\":_vm.rowsPerPage},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_vm._l((Object.keys(_vm.entity.field_configs.list)),function(field){return _c('td',{key:'item-'+props.index+'-'+field,class:{\n            'text-xs-center':_vm.entity.field_configs.list[field].align === 'center',\n            'text-xs-right':_vm.entity.field_configs.list[field].align === 'right',\n            'text-xs-left':_vm.entity.field_configs.list[field].align === 'left'\n          },on:{\"click\":function($event){return _vm.editItem(props.item)}}},[(_vm.entity.field_configs.list[field].formatter)?_c(_vm.entity.field_configs.list[field].formatter,_vm._b({tag:\"component\"},'component',props.item,false)):_c('div',[_vm._v(\"\\n            \"+_vm._s(props.item[field])+\"\\n          \")])],1)}),(!_vm.entity.no_actions)?_c('td',{staticClass:\"justify-center layout px-0\"},[_c('v-icon',{staticClass:\"mr-2\",attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.editItem(props.item)}}},[_vm._v(\"\\n            edit\\n          \")]),_c('v-icon',{attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.deleteItem(props.item)}}},[_vm._v(\"\\n            delete\\n          \")])],1):_vm._e()]}},{key:\"no-data\",fn:function(){return [_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.initialize}},[_vm._v(\"\\n          Reset\\n        \")])]},proxy:true}],null,false,228961364)})],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card v-if=\"entity\">\n    <v-card-title primary-title>\n      <h1>{{ entity.display_name_plural }}</h1>\n      <v-spacer />\n      <v-dialog\n        v-model=\"dialog\"\n        max-width=\"690px\"\n        :transition=\"isMobile ? 'dialog-bottom-transition' : 'dialog-transition'\"\n        scrollable\n        :fullscreen=\"isMobile\"\n      >\n        <template\n          v-if=\"!entity.hideAddButton\"\n          v-slot:activator=\"{ on }\"\n        >\n          <v-btn\n            color=\"success\"\n            v-on=\"on\"\n          >\n            Agregar\n          </v-btn>\n        </template>\n        <v-card>\n          <v-toolbar\n            dark\n            color=\"primary\"\n          >\n            <v-btn\n              v-if=\"isMobile\"\n              icon\n              dark\n              @click=\"dialog = false\"\n            >\n              <v-icon>close</v-icon>\n            </v-btn>\n            <v-toolbar-title>{{ formTitle }}</v-toolbar-title>\n            <v-spacer />\n            <v-subheader v-if=\"item.updated_at && !isMobile\">\n              Ultima modificacion: {{ moment(item.updated_at).fromNow() }}\n            </v-subheader>\n            <v-toolbar-items v-if=\"isMobile\">\n              <v-btn\n                dark\n                flat\n                @click=\"save\"\n              >\n                Guardar\n              </v-btn>\n            </v-toolbar-items>\n          </v-toolbar>\n          <v-card-text>\n            <v-form\n              ref=\"form\"\n              @submit.prevent=\"save\"\n            >\n              <template v-for=\"field in getEntityForm(entity, editedIndex !== -1)\">\n                <render-field\n                  :key=\"'item-form-'+field\"\n                  :entity=\"entity\"\n                  :field=\"field\"\n                  :item=\"item\"\n                  :edited-index=\"editedIndex\"\n                  :rules=\"getFieldValidations(entity, field, item)\"\n                  :change-handler=\"val => item[field] = val\"\n                />\n              </template>\n            </v-form>\n          </v-card-text>\n          <v-card-actions v-if=\"!isMobile\">\n            <v-spacer />\n            <v-btn\n              color=\"blue darken-1\"\n              flat\n              @click=\"close\"\n            >\n              Cancelar\n            </v-btn>\n            <v-btn\n              color=\"blue darken-1\"\n              flat\n              @click=\"save\"\n            >\n              Guardar\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-card-title>\n    <div>\n      <v-toolbar\n        flat\n        color=\"white\"\n      >\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"search\"\n          label=\"Buscar\"\n          single-line\n        />\n      </v-toolbar>\n      <v-data-table\n        :headers=\"getEntityHeaders(entity)\"\n        :search=\"search\"\n        :items=\"getItems({ entity:entity.apiUrl })\"\n        :custom-filter=\"customFilter\"\n        no-results-text=\"No se encontraron registros\"\n        rows-per-page-text=\"Registros por página\"\n        :rows-per-page-items=\"rowsPerPage\"\n        class=\"elevation-1\"\n      >\n        <template v-slot:items=\"props\">\n          <td\n            v-for=\"field in Object.keys(entity.field_configs.list)\"\n            :key=\"'item-'+props.index+'-'+field\"\n            :class=\"{\n              'text-xs-center':entity.field_configs.list[field].align === 'center',\n              'text-xs-right':entity.field_configs.list[field].align === 'right',\n              'text-xs-left':entity.field_configs.list[field].align === 'left'\n            }\"\n            @click=\"editItem(props.item)\"\n          >\n            <component\n              :is=\"entity.field_configs.list[field].formatter\"\n              v-if=\"entity.field_configs.list[field].formatter\"\n              v-bind=\"props.item\"\n            />\n            <div v-else>\n              {{ props.item[field] }}\n            </div>\n          </td>\n          <td\n            v-if=\"!entity.no_actions\"\n            class=\"justify-center layout px-0\"\n          >\n            <v-icon\n              small\n              class=\"mr-2\"\n              @click=\"editItem(props.item)\"\n            >\n              edit\n            </v-icon>\n            <v-icon\n              small\n              @click=\"deleteItem(props.item)\"\n            >\n              delete\n            </v-icon>\n          </td>\n        </template>\n        <template v-slot:no-data>\n          <v-btn\n            color=\"primary\"\n            @click=\"initialize\"\n          >\n            Reset\n          </v-btn>\n        </template>\n      </v-data-table>\n    </div>\n  </v-card>\n</template>\n\n<script>\nimport {\n  getEntityInfo,\n  isValidEntity,\n  getEntityHeaders,\n  getEntityForm,\n  getEntityDefaultItem,\n  getFieldValidations,\n} from '@/utils/entities';\nimport { getDataFromKey } from '../utils';\nimport RenderField from '@/components/form/RenderField.vue';\nimport { mapGetters } from 'vuex';\nimport moment from 'moment';\n\nmoment.locale('es');\n\nexport default {\n  components: { RenderField },\n  data: () => ({\n    search: '',\n    dialog: false,\n    entity: null,\n    editedIndex: -1,\n    item: null,\n    rowsPerPage: [5, 10, 25, { text: 'Todos', value: -1 }],\n\n  }),\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1\n        ? `Crear ${this.entity.display_name}`\n        : `Editar ${this.entity.display_name}`;\n    },\n    isMobile() {\n      return (\n        this.$vuetify.breakpoint.name === 'sm'\n        || this.$vuetify.breakpoint.name === 'xs'\n      );\n    },\n    ...mapGetters('entities', ['getItems']),\n  },\n\n  watch: {\n    dialog(val) {\n      if (!val) this.close();\n      this.$refs.form.resetValidation();\n    },\n  },\n\n  created() {\n    this.initialize();\n  },\n\n  methods: {\n    initialize() {\n      if (isValidEntity({ url: this.$route.params.entity })) {\n        this.entity = getEntityInfo({ url: this.$route.params.entity });\n        this.item = Object.assign({}, getEntityDefaultItem(this.entity));\n        return;\n      }\n      this.$router.replace('/');\n    },\n\n    editItem(item) {\n      this.editedIndex = this.$store.state.entities[this.entity.apiUrl].indexOf(\n        item,\n      );\n      this.item = Object.assign({}, item);\n      this.dialog = true;\n    },\n\n    async deleteItem(item) {\n      const index = this.$store.state.entities[this.entity.apiUrl].indexOf(\n        item,\n      );\n      if (window.confirm('¿Esta seguro de eliminar este registro?')) {\n        const [err, res] = await this.$store.dispatch('entities/delete', {\n          deletedItem: index,\n          entity: this.entity.apiUrl,\n          item,\n        });\n        if (!err) {\n          this.$store.commit('app/showAlert', res);\n        }\n      }\n    },\n\n    close() {\n      this.dialog = false;\n      setTimeout(() => {\n        this.item = Object.assign({}, getEntityDefaultItem(this.entity));\n        this.editedIndex = -1;\n      }, 300);\n    },\n\n    async save() {\n      if (this.$refs.form.validate()) {\n        if (this.editedIndex > -1) {\n          const [err, res] = await this.$store.dispatch('entities/update', {\n            updatedItem: this.editedIndex,\n            entity: this.entity.apiUrl,\n            item: this.item,\n          });\n          if (!err) {\n            this.$store.commit('app/showAlert', res);\n            this.close();\n          } else if (\n            err.response\n            && err.response.data\n            && err.response.data.error\n          ) {\n            const { data } = err.response;\n            this.$store.commit('app/showAlert', {\n              ...data,\n              message: data.error[Object.keys(data.error)[0]][0],\n            });\n          }\n        } else {\n          const [err, res] = await this.$store.dispatch('entities/create', {\n            entity: this.entity.apiUrl,\n            item: this.item,\n          });\n          if (!err) {\n            this.$store.commit('app/showAlert', res);\n            this.close();\n          } else if (\n            err.response\n            && err.response.data\n            && err.response.data.error\n          ) {\n            const { data } = err.response;\n            this.$store.commit('app/showAlert', {\n              ...data,\n              message: data.error[Object.keys(data.error)[0]][0],\n            });\n          }\n        }\n      } else {\n        this.$refs.form.resetValidation();\n        setTimeout(() => {\n          this.$refs.form.validate();\n        }, 400);\n      }\n    },\n\n    customFilter(items, search, filter) {\n      const inputSearch = search.toString().toLowerCase();\n      if (inputSearch.trim() === '') return items;\n      const searchKeys = this.entity.field_configs.search;\n      return items.filter(item => (searchKeys || Object.keys(item)).some(key => filter(getDataFromKey(item, key.split('.')), inputSearch)));\n    },\n\n    getEntityHeaders,\n    getEntityForm,\n    getFieldValidations,\n    moment,\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Entity.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Entity.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Entity.vue?vue&type=template&id=4173f237&\"\nimport script from \"./Entity.vue?vue&type=script&lang=js&\"\nexport * from \"./Entity.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/danielortega/Documents/github/sistema-textiles-hernandez/frontend/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VCard } from 'vuetify/lib'\nimport { VCardActions } from 'vuetify/lib'\nimport { VCardText } from 'vuetify/lib'\nimport { VCardTitle } from 'vuetify/lib'\nimport { VDataTable } from 'vuetify/lib'\nimport { VDialog } from 'vuetify/lib'\nimport { VForm } from 'vuetify/lib'\nimport { VIcon } from 'vuetify/lib'\nimport { VSpacer } from 'vuetify/lib'\nimport { VSubheader } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\nimport { VToolbar } from 'vuetify/lib'\nimport { VToolbarItems } from 'vuetify/lib'\nimport { VToolbarTitle } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDataTable,VDialog,VForm,VIcon,VSpacer,VSubheader,VTextField,VToolbar,VToolbarItems,VToolbarTitle})\n"],"sourceRoot":""}